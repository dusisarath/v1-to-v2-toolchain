{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "messages": {
       "$i18n": "locales.yml"
    },
    "title": {
      "$ref": "#/messages/github.title"
    },
    "description": {
      "$ref": "#/messages/github.description"
    },
    "longDescription": {
      "$ref": "#/messages/github.longDescription"
    },
    "type": "object",
    "properties": {
      "type": {
        "type": "string",
      "description": {
        "$ref": "#/messages/github.repositoryType"
      },
      "enum": ["new"],
      "readonly": true
      },
      "repo_name": {
        "title": {
          "$ref": "#/messages/github.repositoryName"
        },
       "description": {
          "$ref": "#/messages/github.newRepoDescription"
        },
        "type": "string"
      },
      "existing_repo_url": {
        "title": {
          "$ref": "#/messages/github.existingRepository"
        },
	      "description": {
          "$ref": "#/messages/github.existingRepoDescription"
        },
        "type": "string",
        "readonly" : true
      },
      "private_repo": {
        "title": {
          "$ref": "#/messages/github.privateRepository"
        },
        "description": {
          "$ref": "#/messages/github.privateRepoDescription"
        },
        "type": "boolean",
        "default": true
      },
      "has_issues": {
        "title": {
          "$ref": "#/messages/github.enableIssues"
        },
        "description": {
          "$ref": "#/messages/github.enableIssuesDescription"
        },
        "type": "boolean",
        "default": true
      },
      "enable_traceability": {
        "type": "boolean",
        "title": {
          "$ref": "#/messages/github.trackDeployment"
        },
        "description": {
          "$ref": "#/messages/github.trackDeployDescription"
        },
        "default": true
      }
    },
    "required": ["repo_name"],
    "form": [
      {
        "type": "validator",
        "url": "/devops/setup/bm-helper/github_helper.html"
      },
      {
      "type": "selectfieldset",
      "key": "type",
      "titleMap": {
        "new": {
          "$ref": "#/messages/github.new"
        }
      },
      "items": [{
        "type": "section",
          "items": ["repo_name", "existing_repo_url"]
      }]
      },
      {
        "type": "boolean",
        "key": "enable_traceability"
      }
    ],
    "actions": {
      "create": ["has_issues","repo_name","type"]
    }
}
